Основная задача протокола TCP – обеспечение надежной доставки данных. Одна из возможных проблем – потеря сообщений на промежуточных устройствах, в силу ошибок или переполнения памяти. Для предотвращения таких потерь используется управление перегрузкой в TCP.

В управлении перегрузкой отправитель регулирует скорость передачи данных, постепенно увеличивая ее (мы все же хотим передавать данные как можно быстрее) и уменьшая скорость передачи при возникновении ошибки. Существует множество алгоритмов управления перегрузкой. Одни их них – Tahoe. В нем используются следующие понятия:

RTT (Round-Trip Time) — номинальное время полного пути пакета, то есть интервал между отправкой сегмента TCP и получением соответствующего ACK (подтверждения). Учтите, что это эталонное значение. В течение времени = RTT отправитель может отправить большое количество пакетов, не дожидаясь ACK.

cwnd (Congestion Window) — окно перегрузки, переменная на стороне отправителя, определяющая максимальное количество неподтверждённых сегментов, которое можно отправить в сеть без ACK. Этим окном как раз ограничивается скорость передачи. Чем больше окно, тем быстрее (интенсивнее) отправляются TCP-сегменты.

MSS (Maximum Segment Size) — максимальный размер полезной нагрузки TCP-сегмента (обычно 1460 байт для Ethernet); используется как единица для роста cwnd.

ssthresh (Slow Start Threshold) — пороговое значение окна перегрузки; разделяет фазы медленного старта (см. далее) и предотвращения перегрузки. В Tahoe изначально ssthresh изначально не задаётся фиксированно (принимается = бесконечности), а устанавливается динамически при первой потере. Будем считать (несколько упрощая), что при первой потере ssthresh= cwnd/2.

Slow Start — фаза управления перегрузкой, где cwnd удваивается каждый RTT (при начальном значении = 1 MSS), чтобы быстро "нащупать" реальную пропускную способность сети.

Congestion Avoidance — фаза, наступающая после достижения ssthresh. В этой фазе cwnd растёт линейно (+1 MSS за RTT), чтобы стабилизировать передачу без перегрузки.

Сначала скорость передачи растет согласно Slow Start, а как случается первая потеря, рассчитывается ssthresh, после чего cwnd сбрасывается в 1 MSS, заново запускается Slow Start (cwnd удваивается каждый RTT), но уже до установленного ssthresh. Достигнув ssthresh, алгоритм переходит в режим Congestion Avoidance при котором рост cwnd +1 MSS за RTT, пока не произойдет новая потеря, после чего ssthresh уменьшается вдвое снова. Это создаёт "зубчатую" кривую cwnd.

Например, если потеря на случилась при cwnd=256 MSS, то ssthresh = cwnd/2=128 MSS, cwnd сбрасывается в 1 MSS, возврат в Slow Start — cwnd удваивается каждый RTT до нового ssthresh (128 MSS). Достигнув ssthresh, переход в Congestion Avoidance — рост cwnd +1 MSS за RTT, пока не произойдет новая потеря.

В задаче работает TCP-соединение для передачи файла из 767 сегментов данных (каждый по 1460 байт) через сеть с RTT = 120 мс.

Сервер использует алгоритм TCP Tahoe для управления перегрузкой:

Slow Start: cwnd удваивается каждый RTT (начиная с 1 MSS).
Congestion Avoidance: после ssthresh cwnd растёт на 1 MSS за RTT.
При потере сегмента (или timeout): ssthresh = cwnd/2, cwnd = 1 MSS, и происходит возврат в Slow Start.
При передаче происходит потеря на 512-м сегменте.

При расчетах:

Учитывайте только RTT для передачи сегментов по текущему cwnd (каждый RTT = 120 мс). Игнорируйте время на retransmit потерянного сегмента, обработку ACK, Nagle и любые extra-RTT. Считайте, что потерянный пакет передается заново за 1 RTT.
Считайте, что потеря мгновенно сбрасывает cwnd=1 и задаёт ssthresh, но не добавляет RTT сверх фаз congestion control.
Рассчитайте общее время передачи всех сегментов (сумма RTT × 120 мс).

Выберите наиболее близкое к ответу значение:

Ответ

1,6 секунды

2,2 секунды

9,6 секунд

3,1 секунды

2,4 секунды

3,0 секунды